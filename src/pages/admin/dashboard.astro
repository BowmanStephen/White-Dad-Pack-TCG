---
/**
 * Admin Dashboard Page
 *
 * Main admin panel dashboard with overview stats and navigation.
 * Requires authentication.
 */

import { isAuthenticated, getSession } from '@/stores/admin';
import Layout from '../../layouts/BaseLayout.astro';

// Check authentication
const authenticated = isAuthenticated();

if (!authenticated) {
  return Astro.redirect('/admin/login');
}

const session = getSession();
---

<Layout title="Admin Dashboard - DadDeckâ„¢">
  <div class="min-h-screen bg-slate-900">
    <!-- Admin Panel Shell -->
    <div id="admin-shell" class="flex min-h-screen"></div>
  </div>

  <!-- Admin Panel Svelte App -->
  <script client:load>
    import AdminShell from '@/components/admin/AdminShell.svelte';

    // Mount admin shell to container
    const container = document.getElementById('admin-shell');
    if (container) {
      new AdminShell({ target: container, props: {
        currentSection: 'dashboard',
        username: '<%= session?.username || "Admin" %>',
      }});
    }
  </script>
</Layout>

<style>
  /* Admin panel styles */
  #admin-shell {
    width: 100%;
  }
</style>
