---
import BaseLayout from '@/layouts/BaseLayout.astro';
import AchievementToast from '@/components/achievements/AchievementToast.svelte';
import AchievementList from '@/components/achievements/AchievementList.svelte';
import Navigation from '@/components/common/Navigation.svelte';
import Breadcrumbs from '@/components/nav/Breadcrumbs.svelte';
---

<BaseLayout title="Achievements - DadDeck‚Ñ¢">
  <Navigation client:load />

  <!-- Breadcrumbs -->
  <Breadcrumbs client:load />

  <div class="container">
    <header>
      <h1>Achievements</h1>
      <p class="subtitle">Track your progress and unlock rewards</p>
    </header>

    <!-- Test Section for Toast Notifications -->
    <section class="test-section">
      <h2>Test Achievement Notifications</h2>
      <p class="description">
        Click the buttons below to trigger achievement unlock toasts with different rarities.
        Gold and Platinum achievements include confetti effects!
      </p>

      <div class="button-grid">
        <button
          class="test-button bronze"
          data-rarity="bronze"
          data-name="First Pack"
          data-description="Open your first pack of cards">
          ü•â Test Bronze
        </button>

        <button
          class="test-button silver"
          data-rarity="silver"
          data-name="Collector"
          data-description="Collect 10 unique cards">
          ü•à Test Silver
        </button>

        <button
          class="test-button gold"
          data-rarity="gold"
          data-name="Rare Hunter"
          data-description="Open 5 rare cards in one pack">
          ü•á Test Gold (Confetti!)
        </button>

        <button
          class="test-button platinum"
          data-rarity="platinum"
          data-name="Mythic Master"
          data-description="Pull a mythic card">
          üíé Test Platinum (Mega Confetti!)
        </button>
      </div>
    </section>

    <!-- Achievements Gallery -->
    <section class="achievements-section">
      <AchievementList client:load achievements={[]} />
    </section>
  </div>

  <AchievementToast client:load />
</BaseLayout>

<style>
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    header {
      text-align: center;
      margin-bottom: 3rem;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin: 0 0 0.5rem 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1.1rem;
      color: #6b7280;
      margin: 0;
    }

    .test-section {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 0 0 1rem 0;
      color: #1f2937;
    }

    .description {
      color: #6b7280;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .button-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .test-button {
      padding: 1rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .test-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    .test-button:active {
      transform: translateY(0);
    }

    .test-button.bronze {
      background: linear-gradient(135deg, #cd7f32 0%, #e5a85c 100%);
      color: white;
    }

    .test-button.silver {
      background: linear-gradient(135deg, #c0c0c0 0%, #e0e0e0 100%);
      color: #1f2937;
    }

    .test-button.gold {
      background: linear-gradient(135deg, #ffd700 0%, #ffe55c 100%);
      color: #1f2937;
    }

    .test-button.platinum {
      background: linear-gradient(135deg, #e5e4e2 0%, #f0eff0 100%);
      color: #1f2937;
    }

    .achievements-section {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    @media (max-width: 640px) {
      h1 {
        font-size: 2rem;
      }

      .button-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>

<script define:vars={{ achievements: [{ id: 'test1', name: 'Pack Opener', description: 'Open your first pack', rarity: 'bronze', category: 'collection', icon: 'üì¶' }] }}>
  import { unlockAchievement } from '@/stores/achievements';
  import type { Achievement, AchievementRarity } from '@/types';

  // Get all test buttons
  const testButtons = document.querySelectorAll('.test-button');

  testButtons.forEach(button => {
    button.addEventListener('click', () => {
      const rarity = button.getAttribute('data-rarity') as AchievementRarity;
      const name = button.getAttribute('data-name') || 'Test Achievement';
      const description = button.getAttribute('data-description') || 'Test description';

      const achievement: Achievement = {
        id: `test-${Date.now()}`,
        name,
        description,
        icon: 'üèÜ',
        rarity,
        category: 'collection',
      };

      unlockAchievement(achievement);
    });
  });
</script>
