---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/landing/Hero.astro';
import Features from '../components/landing/Features.astro';
import FeaturedCards from '../components/landing/FeaturedCards.astro';
import PackPreview from '../components/landing/PackPreview.svelte';
import Footer from '../components/landing/Footer.astro';
import Navigation from '../components/common/Navigation.svelte';
import WelcomeModal from '../components/onboarding/WelcomeModal.svelte';
import Tutorial from '../components/onboarding/Tutorial.svelte';
import TutorialAutoStart from '../components/onboarding/TutorialAutoStart.svelte';



// Enhanced SEO for homepage
const title = "DadDeck - The Ultimate White Dad Trading Card Simulator";
const description = "Open digital booster packs featuring collectible dad-themed cards. Free, hilarious, and endlessly entertaining. Grillmaster Gary, Fix-It Dad, and 50+ more cards to collect!";
const imageURL = new URL('/og-image.png', Astro.site).href;
const siteURL = Astro.site?.href || 'https://daddeck.com';

// WebApplication structured data for rich Google results
const webApplicationSchema = {
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "DadDeck",
  "url": siteURL,
  "description": "A free browser-based trading card game pack opening simulator parodying suburban American dad culture.",
  "applicationCategory": "GameApplication",
  "operatingSystem": "Any",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "1250"
  },
  "browserRequirements": "Requires JavaScript. Compatible with all modern browsers.",
  "softwareVersion": "1.0.0",
  "author": {
    "@type": "Organization",
    "name": "DadDeck"
  },
  "image": imageURL
};
---

<BaseLayout
  title={title}
  description={description}
  image="/og-image.png"
>
  <!-- Critical components: load immediately -->
  <Navigation client:load />



  <!-- Defer non-critical components: load when browser is idle -->


  <main id="main-content" class="pt-16" tabindex="-1" role="main">
    <!-- Static content: server-side rendered -->
    <Hero />
    <Features />

    <!-- Interactive components: lazy load when visible -->
    <PackPreview client:visible />
    <FeaturedCards />
  </main>

  <!-- Static footer: server-side rendered -->
  <Footer />

  <!-- Additional structured data for homepage -->
  <script type="application/ld+json" is:inline set:html={JSON.stringify(webApplicationSchema)} />

  <!-- Onboarding System (client-only to avoid SSR issues) -->
  <!-- Welcome modal shows first for new users -->
  <WelcomeModal client:idle />
  <!-- Tutorial system starts after welcome (or directly if welcome already seen) -->
  <Tutorial client:only="svelte" />
  <TutorialAutoStart client:idle />
</BaseLayout>
